PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE IF NOT EXISTS "accounts_user" ("userid" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "password" varchar(128) NOT NULL, "last_login" datetime NULL, "email" varchar(255) NOT NULL UNIQUE, "active" bool NOT NULL, "staff" bool NOT NULL, "admin" bool NOT NULL, "timestamp" datetime NOT NULL);
CREATE TABLE IF NOT EXISTS "paypal_ipn" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "business" varchar(127) NOT NULL, "charset" varchar(255) NOT NULL, "custom" varchar(256) NOT NULL, "notify_version" decimal NULL, "parent_txn_id" varchar(19) NOT NULL, "receiver_email" varchar(254) NOT NULL, "receiver_id" varchar(255) NOT NULL, "residence_country" varchar(2) NOT NULL, "txn_id" varchar(255) NOT NULL, "txn_type" varchar(255) NOT NULL, "verify_sign" varchar(255) NOT NULL, "address_country" varchar(64) NOT NULL, "address_city" varchar(40) NOT NULL, "address_country_code" varchar(64) NOT NULL, "address_name" varchar(128) NOT NULL, "address_state" varchar(40) NOT NULL, "address_status" varchar(255) NOT NULL, "address_street" varchar(200) NOT NULL, "address_zip" varchar(20) NOT NULL, "contact_phone" varchar(20) NOT NULL, "first_name" varchar(64) NOT NULL, "last_name" varchar(64) NOT NULL, "payer_business_name" varchar(127) NOT NULL, "payer_email" varchar(127) NOT NULL, "payer_id" varchar(13) NOT NULL, "auth_amount" decimal NULL, "auth_exp" varchar(28) NOT NULL, "auth_id" varchar(19) NOT NULL, "auth_status" varchar(255) NOT NULL, "exchange_rate" decimal NULL, "invoice" varchar(127) NOT NULL, "item_name" varchar(127) NOT NULL, "item_number" varchar(127) NOT NULL, "mc_currency" varchar(32) NOT NULL, "mc_fee" decimal NULL, "mc_gross" decimal NULL, "mc_handling" decimal NULL, "mc_shipping" decimal NULL, "memo" varchar(255) NOT NULL, "num_cart_items" integer NULL, "option_name1" varchar(64) NOT NULL, "option_name2" varchar(64) NOT NULL, "payer_status" varchar(255) NOT NULL, "payment_date" datetime NULL, "payment_gross" decimal NULL, "payment_status" varchar(255) NOT NULL, "payment_type" varchar(255) NOT NULL, "pending_reason" varchar(255) NOT NULL, "protection_eligibility" varchar(255) NOT NULL, "quantity" integer NULL, "reason_code" varchar(255) NOT NULL, "remaining_settle" decimal NULL, "settle_amount" decimal NULL, "settle_currency" varchar(32) NOT NULL, "shipping" decimal NULL, "shipping_method" varchar(255) NOT NULL, "tax" decimal NULL, "transaction_entity" varchar(255) NOT NULL, "auction_buyer_id" varchar(64) NOT NULL, "auction_closing_date" datetime NULL, "auction_multi_item" integer NULL, "for_auction" decimal NULL, "amount" decimal NULL, "amount_per_cycle" decimal NULL, "initial_payment_amount" decimal NULL, "next_payment_date" datetime NULL, "outstanding_balance" decimal NULL, "payment_cycle" varchar(255) NOT NULL, "period_type" varchar(255) NOT NULL, "product_name" varchar(255) NOT NULL, "product_type" varchar(255) NOT NULL, "profile_status" varchar(255) NOT NULL, "recurring_payment_id" varchar(255) NOT NULL, "rp_invoice_id" varchar(127) NOT NULL, "time_created" datetime NULL, "amount1" decimal NULL, "amount2" decimal NULL, "amount3" decimal NULL, "mc_amount1" decimal NULL, "mc_amount2" decimal NULL, "mc_amount3" decimal NULL, "password" varchar(24) NOT NULL, "period1" varchar(255) NOT NULL, "period2" varchar(255) NOT NULL, "period3" varchar(255) NOT NULL, "reattempt" varchar(1) NOT NULL, "recur_times" integer NULL, "recurring" varchar(1) NOT NULL, "retry_at" datetime NULL, "subscr_date" datetime NULL, "subscr_effective" datetime NULL, "subscr_id" varchar(19) NOT NULL, "username" varchar(64) NOT NULL, "case_creation_date" datetime NULL, "case_id" varchar(255) NOT NULL, "case_type" varchar(255) NOT NULL, "receipt_id" varchar(255) NOT NULL, "currency_code" varchar(32) NOT NULL, "handling_amount" decimal NULL, "transaction_subject" varchar(256) NOT NULL, "ipaddress" char(39) NULL, "flag" bool NOT NULL, "flag_code" varchar(16) NOT NULL, "flag_info" text NOT NULL, "query" text NOT NULL, "response" text NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "from_view" varchar(6) NULL, "mp_id" varchar(128) NULL, "option_selection1" varchar(200) NOT NULL, "option_selection2" varchar(200) NOT NULL, "test_ipn" bool NOT NULL);
CREATE TABLE IF NOT EXISTS "shop_category" ("catid" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(200) NOT NULL, "slug" varchar(200) NOT NULL UNIQUE);
CREATE TABLE IF NOT EXISTS "shop_product" ("pid" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(200) NOT NULL, "slug" varchar(200) NOT NULL UNIQUE, "price" decimal NOT NULL, "description" text NOT NULL, "image" varchar(100) NOT NULL, "thumb" varchar(100) NOT NULL, "available" bool NOT NULL, "created" datetime NOT NULL, "updated" datetime NOT NULL, "catid" integer NOT NULL REFERENCES "shop_category" ("catid") DEFERRABLE INITIALLY DEFERRED);
CREATE TABLE IF NOT EXISTS "orders_orderitem" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "price" decimal NOT NULL, "quantity" integer unsigned NOT NULL, "order_id" integer NOT NULL REFERENCES "orders_order" ("id") DEFERRABLE INITIALLY DEFERRED, "product_id" integer NOT NULL REFERENCES "shop_product" ("pid") DEFERRABLE INITIALLY DEFERRED);
CREATE TABLE IF NOT EXISTS "orders_order" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "first_name" varchar(50) NOT NULL, "last_name" varchar(50) NOT NULL, "email" varchar(254) NOT NULL, "address" varchar(250) NOT NULL, "postal_code" varchar(20) NOT NULL, "city" varchar(100) NOT NULL, "created" datetime NOT NULL, "updated" datetime NOT NULL, "paid" bool NOT NULL, "currency" varchar(5) NOT NULL, "merchant_email" varchar(254) NOT NULL, "salt" varchar(64) NOT NULL, "shoppingcart_information" varchar(250) NOT NULL, "total_price" decimal NOT NULL, "buyer_id_id" integer NULL REFERENCES "accounts_user" ("userid") DEFERRABLE INITIALLY DEFERRED, "pay_method" varchar(20) NULL, "digest" varchar(64) NOT NULL UNIQUE);
COMMIT;
